<template>
    <template if:true={showAccordion}>

        <lightning-accordion allow-multiple-sections-open onsectiontoggle={handleSectionToggle} active-section-name={activeSections}>

            <lightning-accordion-section name={entityDetails.Name} label={accordionLabel}>
                
                <template if:true={isLoading}>
                    <lightning-spinner alternative-text="Fetching records.."></lightning-spinner>
                </template>
                

                <template if:true={areRecordsFetched}>
                    <template for:each={records} for:item="record">
                        <div class="record" key={record.Id}  data-item={record.Id} onclick={onRecordClick}>
                            <div class="nameField">
                                {entityDetails.NameField}
                            </div>
                            <div class="recordName slds-text-title_bold slds-text-heading_large">
                                {record.Name} 
                            </div>
                        </div>
                    </template>
                </template>


                <template if:true={showPaginationButtons}>
                    <div class="paginationButtons slds-grid_align-center">
                        <lightning-button-icon size="small" disabled={disablePreviousButton} icon-name="utility:chevronleft" onclick={handlePreviousPageClick} alternative-text="Previous page" title="Previous page"></lightning-button-icon>
                        <span class="pageNumber">Page {pageNumber} of {numberOfPages}</span>
                        <lightning-button-icon size="small" disabled={disableNextButton} icon-name="utility:chevronright" onclick={handleNextPageClick} alternative-text="Next page" title="Next page"></lightning-button-icon>
                    </div>
                </template>

            </lightning-accordion-section>

            
        </lightning-accordion>
    </template>

</template>